(function(){function d(a){null!=a&&(a.classList.remove(g),localStorage.removeItem("panel-section-active"))}function e(a){for(var b=f(),c=0;c<b.length;c++)if(b[c]==a)return c}function f(){for(var a=document.getElementsByClassName("section-list")[0].childNodes,b=[],c=0;c<a.length;c++)1==a[c].nodeType&&b.push(a[c]);return b}function n(){var a=new XMLHttpRequest;a.open("GET",h+"/backend/backend_update/version/",!0);a.onreadystatechange=function(){4==a.readyState&&200==a.status&&1==JSON.parse(a.responseText).status&&
(document.getElementsByClassName("_i-notification")[0].classList.add("new-notices"),document.getElementsByClassName("_new-version")[0].classList.add("show"))};a.send(null)}document.getElementsByClassName||(document.getElementsByClassName=function(a){return this.querySelectorAll("."+a)},Element.prototype.getElementsByClassName=document.getElementsByClassName);var g="active",h=document.getElementById("website_url").value,l=document.getElementsByClassName("seotoaster-panel")[0],k=document.getElementsByClassName("section-list")[0];
document.getElementsByClassName("show-hide");null!=localStorage.getItem("panel-section-active")&&f()[localStorage.getItem("panel-section-active")].classList.add("active");window.addEventListener("load",function(){n()});k.addEventListener("click",function(a){a.preventDefault();var b=a.target.parentNode,c=k.querySelector(".section.active");if(-1==a.target.className.indexOf("section-btn")||-1!=a.target.className.indexOf("no-open-section"))return!1;b.classList.contains(g)?d(b):(d(c),localStorage.setItem("panel-section-active",
e(b)),b.classList.add(g))});document.addEventListener("click",function(a){var b=a.target;for(a=[];b;)a.push(b),b=b.parentNode;for(b=0;b<a.length-2;b++)if(a[b].classList.contains("seotoaster-panel"))return!1;d(k.querySelector(".section.active"))});document.getElementsByClassName("show-hide")[0].addEventListener("click",function(a){a.target.classList.toggle("_i-panel-hide");a.target.classList.toggle("_i-panel-show");l.classList.toggle("s");l.classList.toggle("h")});var m=document.getElementById("del-this-page");
m&&m.addEventListener("click",function(a){var b=document.getElementById("del-page-id").value;if(0==a.target.getAttribute("data-cid")){if(a=new XMLHttpRequest,a.open("GET",h+"backend/backend_page/checkforsubpages/pid/"+b,!1),a.send(null),200==a.status){if(a.responseText.subpages)return smoke.alert(a.responseText.message,function(a){},{classname:"warning"}),!1;showDelConfirm()}}else showDelConfirm()});document.getElementById("edit404").addEventListener("click",function(){var a=new XMLHttpRequest;a.open("GET",
h+"/backend/backend_page/edit404page",!1);a.send(null);200==a.status&&(a=JSON.parse(a.responseText),a.notFoundUrl?window.location.href=a.notFoundUrl:smoke.alert(document.getElementsByClassName("edit404-msg")[0].innerHTML,{classname:"errors"}))})})();
function showDelConfirm(){var d=$("#del-page-id").val(),e=$("#website_url").val();smoke.confirm("Are you sure you want to delete this page?",function(f){f&&$.ajax({url:e+"backend/backend_page/delete/id/"+d,type:"DELETE",dataType:"json",beforeSend:function(){smoke.signal("Removing page...",3E4)},success:function(d){hideSpinner();d.error?smoke.alert(d.responseText.body,{classname:"error"}):top.location.href=e}})},{classname:"error",ok:"Yes",cancel:"No"})};
